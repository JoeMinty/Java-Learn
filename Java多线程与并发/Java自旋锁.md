# `Java`自旋锁

**自旋锁:** 竞争锁失败的线程，并不会真实的在操作系统层面挂起等待，而是`JVM`会让线程做几个空循环（基于预测在不久的将来就能获得），在经过若干次循环后，如果可以获得锁，那么进入临界区，如果还不能获得锁，才会真实的将线程在操作系统层面进行挂起。

## 适用场景

自旋锁可以减少线程的阻塞，这对于锁竞争不激烈，且占用锁时间非常短的代码来说，有较大的性能提升，因为自旋的消耗会小于线程阻塞挂起操作的消耗。如果锁的竞争激烈，或者持有锁的线程需要长时间占用锁执行同步块，就不适合使用自旋锁了，因为自旋锁在获取锁前一直都是占用`CPU`做无用功，线程自旋的消耗大于线程阻塞挂起操作的消耗，造成`CPU`的浪费。

## 自旋锁的优缺点

自旋锁是尝试获取锁的线程不会立即阻塞，采用循环的方式去获取锁，好处是减少了上下文切换，缺点是消耗`cpu`

